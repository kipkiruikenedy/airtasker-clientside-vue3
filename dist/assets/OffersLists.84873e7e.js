import{f as x,g as y,h as S,o as u,c as p,d as e,b as v,t as i,F as w,m as I,q as $,e as b,I as N,j as f,R as B,S as c,i as R,r as A,a as k,n as D}from"./index.47ead3c3.js";const O={class:"bg-white rounded border border-red m-6 p-2"},P={class:"flex space-x-2"},T={class:"justify-center pt-4 pl-7"},Y={class:"flex space-x-10"},V={class:"text-blue-800 font-semibold mx-1"},j={class:"text-blue-900 font-bold"},L={class:"flex items-center space-x-1"},M={class:"ml-1"},E=e("span",{class:"mr-1"},"%",-1),F=e("div",{class:"py-1 px-2"},null,-1),q={class:"text-center text-2xl"},z={class:"p-3"},U={class:"bg-gray-200 rounded py-2 px-3 text-center"},G={class:"py-1 px-2 flex justify-between m-1"},H={class:"text-blue-900 text-center font-semibold border rounded py-1 px-2 mt-4"},J=e("p",null,"Reply",-1),K=[J],Q=e("p",null,"employ",-1),W=[Q],X={class:"bg-gray-200"},Z={__name:"ClientOfferCard",props:{name:String,fname:String,lname:String,message:String,taskerId:String,taskId:String,avgStars:{type:Number,validator:s=>Number.isInteger(parseInt(s))},amount:{type:Number,validator:s=>Number.isInteger(parseInt(s))},totalStars:{type:Number,validator:s=>Number.isInteger(parseInt(s))},numberOftimeRated:{type:Number,validator:s=>Number.isInteger(parseInt(s))},CompletionPercentage:{type:Number,validator:s=>Number.isInteger(parseInt(s))},minutesAgo:{type:Number,validator:s=>Number.isInteger(parseInt(s))}},setup(s){const d=s,g=x(),m=y(),n=g.params.id,h=d.taskerId,r=d.taskId,o=()=>{c.fire({title:"Are you sure?",text:"You want to employ this tasker!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, I want to employ!"}).then(a=>{a.isConfirmed?c.fire("Proceed to the payment page to complete employment process","Your money will be on hold untill the tasker completes the task.","warning").then(()=>{m.push(`/client/task/${n}/pay?tasker_id=${h}`)}):a.dismiss===c.DismissReason.cancel&&c.fire("Cancelled succesfully","You have succesfully cancelled the operation.","error")})},t=()=>{c.fire({title:"Are you sure?",text:"You want to open private chat with tasker!",icon:"warning",showCancelButton:!0,confirmButtonText:"ok",cancelButtonText:"cancel",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(a=>{a.isConfirmed&&m.push(`/client/task/${r}/offer/${n}/chats`)})};return(a,l)=>{const C=S("v-avatar");return u(),p("div",O,[e("div",P,[e("div",T,[v(C,{image:""})]),e("div",Y,[e("div",null,[e("div",null,[e("span",V,i(s.fname),1),e("span",j,i(s.lname?s.lname.charAt(0):""),1)]),e("div",L,[(u(),p(w,null,I(5,_=>v(b(N),{key:"i",icon:"ic:baseline-star",class:$([{"text-yellow-500":_<=s.avgStars},"w-4 h-4"])},null,8,["class"])),64)),e("span",M,"of ("+i(s.numberOftimeRated)+")",1)]),e("div",null,[f(i(s.CompletionPercentage),1),E,f("Completion rate")])]),F])]),e("div",q,"Bidded Amount: $"+i(s.name),1),e("div",z,[e("div",U,i(s.message),1),e("div",G,[e("p",H,"posted "+i(s.minutesAgo),1),e("div",null,[e("button",{class:"bg-green-600 text-white py-1 px-3 rounded-lg items-center flex",onClick:l[0]||(l[0]=_=>t())},K)]),e("div",null,[e("button",{class:"bg-green-600 text-white py-1 px-3 rounded-lg items-center flex",onClick:l[1]||(l[1]=_=>o())},W)])])]),e("div",X,[v(b(B))])])}}},tt={class:"m-2 space-y-5"},st={__name:"OffersLists",setup(s){const d=x();y(),R(0);const g=d.params.id,m=new URLSearchParams([["task_id",g]]),n=A({categories:[],offers:[]});function h(r){const t=(new Date().getTime()-new Date(r).getTime())/1e3;if(t<60)return"now";if(t<3600){const a=Math.floor(t/60);return`${a} minute${a>1?"s":""} ago`}else if(t<86400){const a=Math.floor(t/3600);return`${a} hour${a>1?"s":""} ago`}else{const a=Math.floor(t/86400);return`${a} day${a>1?"s":""} ago`}}return k.get("http://127.0.0.1:8000/api/client/task-offer",{params:m}).then(r=>{n.offers.push(...r.data.map(t=>({...t,created_at:h(t.created_at),tasker:null})));const o=r.data[0].tasker_id;k.get(`http://127.0.0.1:8000/api/ratings/${o}`).then(t=>{const a=t.data;n.offers[0].rating=a}).catch(t=>{console.log(t)}),k.get(`http://127.0.0.1:8000/api/users/${o}`).then(t=>{const a=t.data;n.offers.find(l=>l.tasker_id===o).tasker=a}).catch(t=>{console.log(t)})}),(r,o)=>(u(!0),p(w,null,I(n.offers,t=>(u(),p("div",tt,[(u(),D(Z,{key:t.id,name:t.price,CompletionPercentage:t.status,message:t.content,minutesAgo:t.created_at,taskerId:t.tasker_id,priceAmount:t.price,avgStars:t.rating?t.rating.average_rating:null,numberOftimeRated:t.rating?t.rating.times_rated:null,totalStars:t.rating?t.rating.total_stars:null,fname:t.tasker?t.tasker.first_name:null,lname:t.tasker?t.tasker.last_name:null},null,8,["name","CompletionPercentage","message","minutesAgo","taskerId","priceAmount","avgStars","numberOftimeRated","totalStars","fname","lname"]))]))),256))}};export{st as default};
