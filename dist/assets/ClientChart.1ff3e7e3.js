import{u as w,i as n,r as k,b as l,H as C,c,a as t,F as I,m as F,k as M,p as D,E as S,f as z,o as d,q as B,t as H,g as L}from"./index.5473cf79.js";const V={class:"z-50"},K={class:"bg-white rounded-lg border border-gray-300 shadow-lg overflow-hidden w-96"},T=t("div",{class:"bg-gray-100 py-2 px-4"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Chat ")],-1),A={class:"p-4 h-64 overflow-y-auto"},E={class:"bg-gray-100 py-2 px-4 flex"},R=t("svg",{class:"w-6 h-6 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[t("path",{d:"M0 0h24v24H0z",fill:"none"}),t("path",{d:"M12 3c3.87 0 7 3.13 7 7v4h2l-3.5 3.5L13 14h-2v4c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h6m0 2H6v12h4v-5h2v5h4V5m-2 7l-2.5 2.5L9 12l3-3 3 3-1.5 1.5L13 12z"})],-1),$=[R],q=["onKeyup"],G={__name:"ClientChart",setup(N){const _=z();L();const i=_.params.id,u=w().user.id,a=n(""),o=n([]),p=k([]),y=n(null),h=2;l.get(`/api/offers/${i}`).then(e=>{p.title=e.data.title,p.client=e.data.client,y.value=e.data.tasker.id,v()}).catch(e=>{console.error(e)});async function g(){try{const e=await l.post("/api/chats",{content:a.value,sender_id:u,receiver_id:h,task_id:i});o.value.push(e.data),a.value=""}catch(e){console.log(e)}}function m(){f.value.click()}async function x(e){const r=e.target.files[0];try{const s=new FormData;s.append("file",r);const b=await l.post("http://127.0.0.1:8000/files",s,{headers:{"Content-Type":"multipart/form-data"}});o.value.push({content:`File uploaded: ${b.data.url}`,from:"user"})}catch(s){console.log(s)}}async function v(){try{const e=await l.get("/api/chats",{params:{sender_id:h,receiver_id:u,task_id:i}});o.value=e.data}catch(e){console.log(e)}}const f=n(null);return C(()=>{v()}),(e,r)=>(d(),c("div",V,[t("div",K,[T,t("div",A,[(d(!0),c(I,null,F(o.value,s=>(d(),c("div",{key:s.id,class:B([s.from==="user"?"bg-blue-100 text-left":"bg-gray-100 text-right","p-2 rounded-lg mb-2"])},H(s.content),3))),128))]),t("div",E,[t("input",{type:"file",class:"hidden",ref_key:"fileInput",ref:f,onChange:x},null,544),t("button",{class:"mr-4 text-gray-700 hover:text-gray-900",onClick:m},$),M(t("input",{type:"text",class:"border border-gray-300 rounded-full py-2 px-4 w-full",placeholder:"Type your message here","onUpdate:modelValue":r[0]||(r[0]=s=>a.value=s),onKeyup:S(g,["enter"])},null,40,q),[[D,a.value]]),t("button",{class:"bg-indigo-500 hover:bg-indigo-600 text-white font-medium py-2 px-4 rounded-full",onClick:g},"Send")])])]))}};export{G as default};
