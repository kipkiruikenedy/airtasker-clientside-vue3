import{u as x,i as r,r as b,a as i,G as k,c as d,d as t,F as C,m as D,k as F,p as I,D as M,f as S,o as u,q as z,t as B,g as L}from"./index.da8c82bf.js";const V={class:"z-50"},H={class:"bg-white rounded-lg border border-gray-300 shadow-lg overflow-hidden w-96"},K=t("div",{class:"bg-gray-100 py-2 px-4"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Chat with the tasker")],-1),T={class:"p-4 h-64 overflow-y-auto"},A={class:"bg-gray-100 py-2 px-4 flex"},R=t("svg",{class:"w-6 h-6 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[t("path",{d:"M0 0h24v24H0z",fill:"none"}),t("path",{d:"M12 3c3.87 0 7 3.13 7 7v4h2l-3.5 3.5L13 14h-2v4c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h6m0 2H6v12h4v-5h2v5h4V5m-2 7l-2.5 2.5L9 12l3-3 3 3-1.5 1.5L13 12z"})],-1),$=[R],q=["onKeyup"],U={__name:"ClientChart",setup(E){const f=S();L();const c=f.params.id,h=x().user.id,a=r(""),o=r([]),p=b([]),n=r(null);i.get(`http://127.0.0.1:8000/api/tasks/${c}`).then(e=>{p.title=e.data.title,p.client=e.data.client,n.value=e.data.client.id,console.log(n.value),v()}).catch(e=>{console.error(e)});async function g(){try{const e=await i.post("http://localhost:8000/api/chats",{content:a.value,sender_id:h,receiver_id:n.value,task_id:c});o.value.push(e.data),a.value=""}catch(e){console.log(e)}}function y(){_.value.click()}async function m(e){const l=e.target.files[0];try{const s=new FormData;s.append("file",l);const w=await i.post("http://localhost:8000/files",s,{headers:{"Content-Type":"multipart/form-data"}});o.value.push({content:`File uploaded: ${w.data.url}`,from:"user"})}catch(s){console.log(s)}}async function v(){try{const e=await i.get("http://localhost:8000/api/chats",{params:{sender_id:h,receiver_id:n.value,task_id:c}});o.value=e.data}catch(e){console.log(e)}}const _=r(null);return k(()=>{v()}),(e,l)=>(u(),d("div",V,[t("div",H,[K,t("div",T,[(u(!0),d(C,null,D(o.value,s=>(u(),d("div",{key:s.id,class:z([s.from==="user"?"bg-blue-100 text-left":"bg-gray-100 text-right","p-2 rounded-lg mb-2"])},B(s.content),3))),128))]),t("div",A,[t("input",{type:"file",class:"hidden",ref_key:"fileInput",ref:_,onChange:m},null,544),t("button",{class:"mr-4 text-gray-700 hover:text-gray-900",onClick:y},$),F(t("input",{type:"text",class:"border border-gray-300 rounded-full py-2 px-4 w-full",placeholder:"Type your message here","onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s),onKeyup:M(g,["enter"])},null,40,q),[[I,a.value]]),t("button",{class:"bg-indigo-500 hover:bg-indigo-600 text-white font-medium py-2 px-4 rounded-full",onClick:g},"Send")])])]))}};export{U as default};
